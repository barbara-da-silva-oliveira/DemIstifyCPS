// automatically generated by Xtext
grammar fr.inria.kairos.influence.InfluenceDSL with org.eclipse.xtext.common.Terminals

import "http://kairos.inria.fr/influenceMetamodel" 
import "http://www.eclipse.org/emf/2002/Ecore" as ecore

InfluenceMetamodel returns InfluenceMetamodel:
	{InfluenceMetamodel}
	'InfluenceModel'
	'{'
		('Requirements' '{' ownedRequirementSatisfaction += RequirementSatisfaction* '}')?
      	('CyberPhysicalPhenomena' '{' ownedCyberPhysicalPhenomena += CyberPhysicalPhenomena*  '}')?
      	('Artifacts' '{' ownedArtifacts += Artifact* '}')?
      	('Influences' '{' ownedInfluences+=Influence* '}' )?
	'}';
 

CyberPhysicalPhenomena returns CyberPhysicalPhenomena:
	CyberPhysicalPhenomena_Impl | MultiPhenomenon | SimplePhenomenon;

Influence returns Influence:
	'Influence'
	name=EString
	'{'
		'sourceArtifact' '{' sourceArtifact+=EString ( "," sourceArtifact+=EString)* '}' 
		'targetArtifact' '{' targetArtifact+=EString ( "," targetArtifact+=EString)* '}' 
		'description' '{' description+=EString ( "," description+=EString)* '}' 
		'sourcePhenomena' '(' sourcePhenomena+=[CyberPhysicalPhenomena|EString] ( "," sourcePhenomena+=[CyberPhysicalPhenomena|EString])* ')' 
		'produces' '{' produces+=EmergentBehavior ( "," produces+=EmergentBehavior)* '}'
		'affects' '{' affects+=SystemResponse ( "," affects+=SystemResponse)* '}' 
		'evaluatedBy' '(' evaluatedBy+=[RequirementSatisfaction|EString] ( "," evaluatedBy+=[RequirementSatisfaction|EString])* ')' 
	'}';

EString returns ecore::EString:
	STRING | ID;

Artifact returns Artifact:
	'Artifacts'
	name=EString
;

RequirementSatisfaction returns RequirementSatisfaction:
	{RequirementSatisfaction}
	'RequirementSatisfaction'
	name=EString
	
	'{'
		'concerningRequirement'  concerningRequirement=EString
		'satisfaction' '{' satisfaction+=EString ( "," satisfaction+=EString)* '}' 
	'}';

SystemResponse returns SystemResponse:
	{SystemResponse}
	'SystemResponse'
	'{'
		('observation' observation=EString)?
	'}';

EmergentBehavior returns EmergentBehavior:
	{EmergentBehavior}
	'EmergentBehavior'
	'{'
		('description' description=EString)?
	'}';

CyberPhysicalPhenomena_Impl returns CyberPhysicalPhenomena:
	{CyberPhysicalPhenomena}
	'CyberPhysicalPhenomena'
	name=EString
	'{'
		('configuration' '{' configuration+=EString ( "," configuration+=EString)* '}' )?
	'}';

MultiPhenomenon returns MultiPhenomenon:
	{MultiPhenomenon}
	'MultiPhenomenon'
	name=EString
	'{'
		('configuration' '{' configuration+=EString ( "," configuration+=EString)* '}' )?
		('compositionOf' '{' compositionOf+=CyberPhysicalPhenomena ( "," compositionOf+=CyberPhysicalPhenomena)* '}' )?
		('aggregationOf' '{' aggregationOf+=CyberPhysicalPhenomena ( "," aggregationOf+=CyberPhysicalPhenomena)* '}' )?
	'}';

SimplePhenomenon returns SimplePhenomenon:
	{SimplePhenomenon}
	'SimplePhenomenon'
	name=EString
	'{'
		('configuration' '{' configuration+=EString ( "," configuration+=EString)* '}' )?
	'}';
