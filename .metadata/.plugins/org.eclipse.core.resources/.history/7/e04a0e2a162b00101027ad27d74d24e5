/*
 * generated by Xtext 2.38.0
 */
package fr.inria.kairos.influence.generator

import org.eclipse.emf.ecore.resource.Resource
import org.eclipse.xtext.generator.AbstractGenerator
import org.eclipse.xtext.generator.IFileSystemAccess2
import org.eclipse.xtext.generator.IGeneratorContext
import org.jgrapht.graph.*

/**
 * Generates code from your model files on save.
 * 
 * See https://www.eclipse.org/Xtext/documentation/303_runtime_concepts.html#code-generation
 */
class InfluenceDSLGenerator extends AbstractGenerator {

	override void doGenerate(Resource resource, IFileSystemAccess2 fsa, IGeneratorContext context) {
		var infoFile = 'Quick Info:'
		val jsonFile = new StringBuilder
		json.append("{\n\t\"influences\": [\n")
		var graph = new DefaultDirectedGraph<String,DefaultEdge>(DefaultEdge)
		
		val ite = resource.allContents
		
		while (ite.hasNext){
			val content = ite.next
			content.
		}
		
		jsonBuilder.append("\t\t{\n")
            jsonBuilder.append("\t\t\t\"name\": \"").append(inf.name).append("\",\n")
            jsonBuilder.append("\t\t\t\"sources\": \"")
                       .append(inf.sourceArtifact.join(", ")).append("\",\n")
            jsonBuilder.append("\t\t\t\"targets\": \"")
                       .append(inf.targetArtifact.join(", ")).append("\"\n")
            jsonBuilder.append("\t\t},\n")
	}
}
